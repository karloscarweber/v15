{{!< default}}
{{!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template --}}

<div class="layout-centered post-container post-template">
  {{> "site-header"}}
</div>
  {{#post}}
      <article class="gl_lesson post-container {{post_class}} {{#unless feature_image}}no-image{{/unless}}">

        {{> "swift-foundations-sidebar"}}

        <div class="gl_lesson__content_wrapper">
          <h1 class="fancy">{{title}}</h1>


          {{#if feature_image}}
            <img class="feature_image" src="{{feature_image}}" alt="">
          {{/if}}

          <div class="content">
            {{content}}
          </div>
        </div>

      </article>
  {{/post}}

  {{#contentFor "template_class"}} book-template {{/contentFor}}


<script type="text/javascript">

  var get_strings = function() {

    function remove_prefixes(string) {
      var newstring = string.replace("http://localhost:2368", "");
      newstring = newstring.replace("https://kow.fm", "");
      return newstring
    }

    var list_elements = document.querySelectorAll(".gl_lesson__sidebar ul li a");
    var url = remove_prefixes(window.location.href);
    console.log("url")
    console.log(url)


    function mark_current(item, index) {
      stripped_string = remove_prefixes(item.href)
      if(stripped_string === url) {
        console.log("match")
        item.classList.add("current-page");
      }
    }

    list_elements.forEach(mark_current)

  }

  window.addEventListener('onload', get_strings());

</script>
